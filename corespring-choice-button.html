<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-styles/typography.html" />
<link rel="import" href="../paper-checkbox/paper-checkbox.html" />
<link rel="import" href="../paper-radio-button/paper-radio-button.html" />
<link rel="import" href="./feedback-tick.html" />

<!-- 
  An element that can be either a checkbox or a radio button, with an optional key and content
  @demo demo/index.html
-->

<dom-module id="corespring-choice-button">
  <template>
    <style>
      :host {
        @apply(--paper-font-common-base);
        --primary-color: var(--choice-button-color, --paper-indigo-500);
        --primary-text-color: var(--choice-button-color, --paper-indigo-500);
        display: inline-block;
      }
      
      .incorrect {
        --primary-color: var(--choice-button-incorrect-color, orange);
        --primary-text-color: var(--choice-button-incorrect-color, orange);
      }
      
      .correct {
        --primary-color: var(--choice-button-correct-color, green);
        --primary-text-color: var(--choice-button-correct-color, green);
      }
      
      feedback-tick {
        position: relative;
        width: var(--choice-button-height, 33px);
        height: var(--choice-button-height, 33px);
        float: left;
        vertical-align: middle;
        top: -3px;
      }
    </style>
    <div>
      <feedback-tick correctness="{{correctness}}"></feedback-tick>
      <template is="dom-if" if="{{_equals('checkbox', mode)}}">
        <paper-checkbox noink value="{{value}}" checked="{{selected}}" on-change="_onChange" class$="{{correctness}}" disabled="{{disabled}}">{{key}}.</paper-checkbox>
      </template>
      <template is="dom-if" if="{{_equals('radio', mode)}}">
        <paper-radio-button noink value="{{value}}" checked="{{selected}}" on-change="_onChange" class$="{{correctness}}" disabled="{{disabled}}">{{key}}.</paper-radio-button>
      </template>
      <span>{{label}}</span>
    </div>
  </template>
</dom-module>
<script>
  Polymer({
    is: "corespring-choice-button",
    properties: {
      mode: {type:String},
      key: {type:String},
      label: {type:String},
      value: {type:String},
      correctness: {type:String, observer: '_onCorrectnessChange'},
      disabled:{type:Boolean},
      selected: {type:Boolean},
      /**
       * Fired when a button is checked/unchecked.
       * @event change
       * 
       */
    },
    _onCorrectnessChange: function(){
      this.updateStyles();
    },
    _equals: function(desired, actual){
      return desired === actual;
    },
    _onChange: function(event){
      event.stopImmediatePropagation();
      this.fire('change');
    }
  });
</script>